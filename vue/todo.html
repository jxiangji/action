<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .list_item {
            float: left;
            width: 400px;
        }
        
        .content {
            margin-left: 400px;
        }
        
        .complete {
            opacity: .4
        }
    </style>
</head>

<body>

    <div id="todo">
        <div class="list_item">
            <h4>事项列表</h4>
            <ul>
                <li v-for="(list,index) in lists" v-bind:class="list.complete&&'complete'">
                    <span>{{list.name}}</span>
                    <button @click="list.complete=!list.complete">{{list.complete?"恢复":"完成"}}</button>
                    <button @click="lists.splice(index,1)">删除</button>
                </li>
            </ul>
            <button @click="save">保存</button>
        </div>
        <div class="content">
            <h4>添加todo</h4>
            <input type="" name="" value="" ref="input">
            <button @click="addTodo" type="">添加</button>
        </div>

    </div>

    <script type="text/javascript" src="vue.js"></script>
    <script>
        var L_STORAGE = {
            get: function(name) {
                return JSON.parse(localStorage.getItem("todo"));
            },
            set: function(name, val) {
                localStorage.setItem(name, JSON.stringify(val));
            }
        };

        var DATA = {
            lists: L_STORAGE.get("todo"),
        };

        new Vue({
            el: "#todo",
            data: DATA,
            methods: {
                addTodo: function() {
                    if (this.$refs.input.value == "") return false;
                    this.lists.push({
                        name: this.$refs.input.value,
                        complete: false
                    })
                    this.$refs.input.value = ""
                },
                save: function() {
                    L_STORAGE.set("todo", this.lists);
                }
            }
        })
    </script>
</body>

</html>